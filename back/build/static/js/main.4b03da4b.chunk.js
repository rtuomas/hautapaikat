(this.webpackJsonphautapaikat=this.webpackJsonphautapaikat||[]).push([[0],{76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(22),r=n.n(a),i=n(2),o=n(1),c=n(10),s=n(0),l=function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn;return t?Object(s.jsxs)("header",{children:[Object(s.jsx)("h1",{children:Object(s.jsx)(c.b,{to:"/",style:{marginLeft:"215px"},children:"Hautapaikat"})}),Object(s.jsxs)("ul",{id:"nav",children:[Object(s.jsxs)("h4",{style:{color:"#e90177",margin:0,marginRight:30},children:["Tervetuloa, ",JSON.parse(localStorage.getItem("username")),"!"]}),Object(s.jsx)("li",{children:Object(s.jsx)(c.b,{className:"hvr-wobble-skew",to:"/about",onClick:function(){return console.log("Test")},children:"Sivustosta"})}),Object(s.jsx)("li",{children:Object(s.jsx)(c.b,{className:"hvr-wobble-skew",to:"/",onClick:function(){localStorage.clear(),n(!1)},style:{fontWeight:"bold"},children:"Kirjaudu ulos"})})]})]}):Object(s.jsxs)("header",{children:[Object(s.jsx)("h1",{children:Object(s.jsx)(c.b,{to:"/",style:{marginLeft:"215px"},children:"Hautapaikat"})}),Object(s.jsxs)("ul",{id:"nav",children:[Object(s.jsx)("li",{children:Object(s.jsx)(c.b,{className:"hvr-wobble-skew",to:"/login",children:"Kirjaudu sis\xe4\xe4n"})}),Object(s.jsx)("li",{children:Object(s.jsx)(c.b,{className:"hvr-wobble-skew",to:"/register",children:"Rekister\xf6idy"})}),Object(s.jsx)("li",{children:Object(s.jsx)(c.b,{className:"hvr-wobble-skew",to:"/about",children:"Sivustosta"})})]})]})},u=n(26),d=n.n(u),j=n(38),h=n(13),g=n.n(h),b="/api",m=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(b,"/loadGraves"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A={newUser:function(e,t,n){return g.a.post("".concat(b,"/newUser"),{username:e,password:t,password2:n}).then((function(e){return e}))},login:function(e,t){return g.a.post("".concat(b,"/login"),{username:e,password:t}).then((function(e){return e}))},newGrave:function(e){var t=JSON.parse(localStorage.getItem("myToken"));return g.a.post("".concat(b,"/addDead"),e,{headers:{Authorization:"Bearer: "+t}}).then((function(e){return e.data}))},loadGraves:m,checkLogin:function(){var e=JSON.parse(localStorage.getItem("myToken"));return g.a.post("".concat(b,"/checkLogin"),{headers:{Authorization:"Bearer: "+e}}).then((function(e){return e}))},deleteGrave:function(e){var t=JSON.parse(localStorage.getItem("myToken"));return g.a.delete("".concat(b,"/deleteGrave"),{headers:{Authorization:"Bearer: "+t},data:{id:e}}).then((function(e){return e.data}))}},f=n(3),O=function(e){e.isLoggedIn;var t=e.setIsLoggedIn,n=Object(o.useState)(""),a=Object(i.a)(n,2),r=a[0],c=a[1],u=Object(o.useState)(""),d=Object(i.a)(u,2),j=d[0],h=d[1],g=Object(o.useState)(""),b=Object(i.a)(g,2),m=b[0],O=b[1],p=Object(f.f)();return Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r.length>0&&j.length>0?A.login(r,j).then((function(e){console.log("RES",e.status),202===e.status?(localStorage.setItem("myToken",JSON.stringify(e.data.accessToken)),localStorage.setItem("username",JSON.stringify(e.data.username)),p.push("/"),t(!0)):O(e.data.message)})).catch((function(e){O("Username or password wrong, try again!"),console.log(e)})):O("Username and/or password needs to be more than 0 characters. TRY AGAIN!")},children:[Object(s.jsx)(l,{}),Object(s.jsxs)("div",{id:"logInContainer",children:[Object(s.jsx)("h1",{style:{color:"white"},children:"Kirjaudu sis\xe4\xe4n"}),Object(s.jsxs)("div",{className:"form__group field",children:[Object(s.jsx)("input",{type:"input",autocomplete:"off",className:"form__field",placeholder:"K\xe4ytt\xe4j\xe4tunnus",name:"username",id:"username",value:r,onChange:function(e){return c(e.target.value)},required:!0}),Object(s.jsx)("label",{htmlFor:"name",className:"form__label",children:"K\xe4ytt\xe4j\xe4tunnus"})]}),Object(s.jsxs)("div",{className:"form__group field",children:[Object(s.jsx)("input",{type:"password",className:"form__field",placeholder:"Salasana",name:"password",id:"password",value:j,onChange:function(e){return h(e.target.value)},required:!0}),Object(s.jsx)("label",{htmlFor:"name",className:"form__label",children:"Salasana"})]}),Object(s.jsxs)("div",{className:"button",id:"button-2",onClick:function(){return document.getElementById("logInButton").click()},children:[Object(s.jsx)("div",{id:"slide"}),Object(s.jsx)("p",{children:"Kirjaudu sis\xe4\xe4n"})]}),Object(s.jsx)("input",{id:"logInButton",style:{display:"none"},type:"submit",value:"Kirjaudu"}),Object(s.jsx)("p",{style:{color:"red"},children:m})]})]})},p=function(e){e.isLoggedIn;var t=Object(o.useState)(""),n=Object(i.a)(t,2),a=n[0],r=n[1],c=Object(o.useState)(""),u=Object(i.a)(c,2),d=u[0],j=u[1],h=Object(o.useState)(""),g=Object(i.a)(h,2),b=g[0],m=g[1],O=Object(o.useState)(""),p=Object(i.a)(O,2),x=p[0],v=p[1],y=Object(f.f)();return Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a.length>0&&d.length>0&&b.length>0&&d===b?A.newUser(a,d,b).then((function(e){202===e.status?(v(e.message+", \n Redirecting to login page!"),y.push("/login")):v("Something went wrong. Try again!")})).catch((function(e){v("Something went wrong. Try again!"),console.log(e)})):console.log("Validation failed")},children:[Object(s.jsx)(l,{}),Object(s.jsxs)("div",{id:"logInContainer",children:[Object(s.jsx)("h1",{style:{color:"white"},children:"Rekister\xf6idy"}),Object(s.jsxs)("div",{className:"form__group field",children:[Object(s.jsx)("input",{type:"input",autocomplete:"off",className:"form__field",placeholder:"K\xe4ytt\xe4j\xe4tunnus",name:"username",id:"username",onChange:function(e){return r(e.target.value)},value:a,required:!0}),Object(s.jsx)("label",{htmlFor:"name",className:"form__label",children:"K\xe4ytt\xe4j\xe4tunnus"})]}),Object(s.jsxs)("div",{className:"form__group field",children:[Object(s.jsx)("input",{type:"password",className:"form__field",placeholder:"Salasana",name:"password",id:"password",onChange:function(e){return j(e.target.value)},value:d,required:!0}),Object(s.jsx)("label",{htmlFor:"name",className:"form__label",children:"Salasana"})]}),Object(s.jsxs)("div",{className:"form__group field",children:[Object(s.jsx)("input",{type:"password",className:"form__field",placeholder:"Salasana",name:"password",id:"password2",onChange:function(e){return m(e.target.value)},value:b,required:!0}),Object(s.jsx)("label",{htmlFor:"name",className:"form__label",children:"Sy\xf6t\xe4 salasana uudelleen"})]}),Object(s.jsxs)("div",{className:"button",id:"button-2",onClick:function(){return document.getElementById("registerButton").click()},children:[Object(s.jsx)("div",{id:"slide"}),Object(s.jsx)("p",{children:"Rekister\xf6idy"})]}),Object(s.jsx)("input",{type:"submit",id:"registerButton",style:{display:"none"},value:"Luo k\xe4ytt\xe4j\xe4"}),Object(s.jsx)("p",{children:x})]})]})},x=function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn;return Object(s.jsxs)("div",{children:[Object(s.jsx)(l,{isLoggedIn:t,setIsLoggedIn:n}),Object(s.jsx)("div",{id:"aboutContainer",children:Object(s.jsx)("h2",{style:{color:"white"},children:"T\xe4m\xe4 sivusto on tehty Metropolian opiskelijaty\xf6n\xe4."})})]})},v=n(42),y=n(39),w=n(40),k=n(41),I={firstName:"",lastName:"",birthday:"",died:"",cemetery:"",location:{lat:"",long:""},category:""},C=function(e){var t=Object(o.useState)(""),n=Object(i.a)(t,2),a=n[0],r=n[1],c=Object(o.useState)(!1),l=Object(i.a)(c,2),u=l[0],d=l[1],j=Object(o.useState)(""),h=Object(i.a)(j,2),g=h[0],b=h[1],m=Object(o.useState)(!1),f=Object(i.a)(m,2),O=f[0],p=f[1],x=Object(o.useState)(""),C=Object(i.a)(x,2),N=C[0],R=C[1];function L(t){t.preventDefault(),I.firstName.length>0&&I.lastName.length>0&&I.birthday.length>0&&I.died.length>0&&I.cemetery.length>0&&I.category.length>0&&e.isLoggedIn?(console.log(I),A.newGrave(I).then((function(t){r(t.message),e.fetchGraves()})).catch((function(e){console.log(e)}))):(r("Fill every field and try again"),console.log(I))}function S(){var t;d(!u),t=!u,e.addingNewGrave(t)}function q(e){var t=e.match(/\d+/g),n=t[0].substring(0),a=t[1];return t[2]+"."+a+"."+n}function G(){var t;return"#"===g.charAt(0)?t=e.graves.filter((function(e){return e.category?e.category.includes(g.substring(1))||e.category.toUpperCase().includes(g.substring(1))||e.category.toLowerCase().includes(g.substring(1)):null})):"@"===g.charAt(0)?t=e.graves.filter((function(e){return e.cemetery.includes(g.substring(1))||e.cemetery.toUpperCase().includes(g.substring(1))||e.cemetery.toLowerCase().includes(g.substring(1))})):g.length>0?t=e.graves.filter((function(e){return e.name.toLowerCase().includes(g)||e.name.toUpperCase().includes(g)||e.name.includes(g)})):0===g.length&&(t=e.graves),t}I.location=e.newGraveCoordinates;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("ul",{id:"sidebar",children:[e.isLoggedIn&&e.isLoggedIn?u?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{style:{color:"white",marginRight:"1em",marginTop:"2.5em",display:"flex",cursor:"pointer"},children:Object(s.jsxs)("p",{onClick:function(){return S()},children:[Object(s.jsx)(w.FaMinusCircle,{style:{marginRight:"1em"}}),"Lis\xe4\xe4 hautapaikka"]})}),Object(s.jsxs)("div",{id:"newGraveContainer",style:{marginBottom:"3rem"},children:[Object(s.jsx)("form",{onSubmit:function(e){return L(e)},children:Object(s.jsxs)("div",{id:"newGraveForm",children:[Object(s.jsx)("label",{htmlFor:"firstName",style:{color:"white",marginRight:"1em"},children:"Etunimi"}),Object(s.jsx)("input",{type:"input",autocomplete:"off",placeholder:"Etunimi",name:"firstName",id:"firstName",required:!0,onChange:function(e){return I.firstName=e.target.value}}),Object(s.jsx)("label",{htmlFor:"lastName",style:{color:"white",marginRight:"1em"},children:"Sukunimi"}),Object(s.jsx)("input",{type:"input",autocomplete:"off",placeholder:"Sukunimi",name:"lastName",id:"lastName",required:!0,onChange:function(e){return I.lastName=e.target.value}}),Object(s.jsx)("label",{htmlFor:"born",style:{color:"white",marginRight:"1em"},children:"Syntynyt"}),Object(s.jsx)("input",{type:"date",placeholder:"Syntynyt",name:"born",id:"born",required:!0,onChange:function(e){return I.birthday=e.target.value}}),Object(s.jsx)("label",{htmlFor:"died",style:{color:"white",marginRight:"1em"},children:"Kuollut"}),Object(s.jsx)("input",{type:"date",placeholder:"Kuollut",name:"died",id:"died",required:!0,onChange:function(e){return I.died=e.target.value}}),Object(s.jsx)("label",{htmlFor:"cemetery",style:{color:"white",marginRight:"1em"},children:"Hautausmaa"}),Object(s.jsx)("input",{type:"input",autocomplete:"off",placeholder:"Hautausmaa",name:"cemetery",id:"cemetery",required:!0,onChange:function(e){return I.cemetery=e.target.value}}),Object(s.jsx)("label",{htmlFor:"x",style:{color:"white",marginRight:"1em"},children:"X-koordinaatti"}),Object(s.jsx)("input",{type:"number",placeholder:"X-koordinaatti",name:"x",id:"x",required:!0,onSubmit:function(e){return I.location.lat=e.target.value},value:e.newGraveCoordinates.lat}),Object(s.jsx)("label",{htmlFor:"y",style:{color:"white",marginRight:"1em"},children:"Y-koordinaatti"}),Object(s.jsx)("input",{type:"number",placeholder:"Y-koordinaatti",name:"y",id:"y",required:!0,onSubmit:function(e){return I.location.long=e.target.value},value:e.newGraveCoordinates.long}),Object(s.jsx)("label",{htmlFor:"category",style:{color:"white",marginRight:"1em"},children:"Kategoria"}),Object(s.jsxs)("select",{name:"category",id:"category",onChange:function(e){return I.category=e.target.value},required:!0,children:[Object(s.jsx)("option",{value:"-",children:"Ei kategoriaa"}),Object(s.jsx)("option",{value:"Musiikki",children:"Muusikko"}),Object(s.jsx)("option",{value:"Politiikka",children:"Poliitikko"}),Object(s.jsx)("option",{value:"Elokuvat",children:"Elokuvat"}),Object(s.jsx)("option",{value:"Viihde",children:"Viihde"}),Object(s.jsx)("option",{value:"Kulttuuri",children:"Kulttuuri"}),Object(s.jsx)("option",{value:"Kirjailija",children:"Kirjailija"}),Object(s.jsx)("option",{value:"Muu",children:"Muu"})]}),Object(s.jsxs)("div",{className:"button",id:"button-7",onClick:function(){return document.getElementById("newGraveButton").click()},style:{marginTop:"1rem"},children:[Object(s.jsx)("div",{id:"dub-arrow",children:Object(s.jsx)("img",{src:"data:image/png;base64,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",alt:""})}),Object(s.jsx)("p",{children:"L\xe4het\xe4"})]}),Object(s.jsx)("input",{id:"newGraveButton",style:{marginTop:"1em",display:"none"},type:"submit",value:"submit"})]})}),Object(s.jsx)("p",{style:{color:"red"},children:a})]})]}):Object(s.jsx)("div",{style:{color:"white",marginRight:"1em",marginTop:"2.5em",display:"flex",cursor:"pointer"},children:Object(s.jsxs)("p",{onClick:function(){return S()},children:[Object(s.jsx)(y.FaPlusCircle,{style:{marginRight:"1em"}}),"Lis\xe4\xe4 hautapaikka"]})}):null,Object(s.jsxs)("div",{style:{display:"flex"},children:[Object(s.jsx)(v.FaSearch,{style:{color:"white",marginRight:"1em",marginTop:"2.5em"},id:"searchIcon"}),Object(s.jsxs)("div",{className:"form__group field",children:[Object(s.jsx)("input",{type:"input",className:"form__field",placeholder:"Hae",name:"search",id:"search",onChange:function(e){return function(e){e.preventDefault(),b(e.target.value)}(e)}}),Object(s.jsx)("label",{htmlFor:"name",className:"form__label",children:"Hae"})]})]}),Object(s.jsx)("ul",{id:"results",children:G().map((function(t){return Object(s.jsxs)("li",{children:[Object(s.jsx)("div",{id:"singleResult",onClick:function(){return n=!O,a=t._id,r=t.location,p(n),R(a),void(n&&e.handleSetCoordinatesForZoom(r));var n,a,r},children:t.name}),function(){var n;if(O&&N===t._id)return Object(s.jsxs)("div",{id:"singleResultDetails",children:[Object(s.jsxs)("ul",{children:[Object(s.jsxs)("li",{children:["Syntynyt: ",q(t.birthday)]}),Object(s.jsxs)("li",{children:["Kuollut: ",q(t.died)]}),Object(s.jsxs)("li",{children:["Hautausmaa: ",t.cemetery]}),Object(s.jsxs)("li",{children:["Kategoria: ",null!==(n=t.category)&&void 0!==n?n:"-"]})]}),e.isLoggedIn?Object(s.jsxs)("div",{id:"deleteGrave",onClick:function(){return n=t._id,console.log("Delete grave: "+n),void A.deleteGrave(n).then((function(t){console.log(t),e.fetchGraves()})).catch((function(e){console.log("Problem loading graves from database: ".concat(e))}));var n},children:[Object(s.jsx)(k.FaTimes,{id:"deleteGraveIcon"}),Object(s.jsx)("p",{children:"Poista hauta"})]}):null]})}()]},t._id)}))})]})})},N=n(79),R=n(80),L=n(82),S=n(83),q=n(81),G=(n(73),n(74),n(75),n(11)),K=n.n(G),B=n.p+"static/media/grave.82c3d5ca.svg",D=!1;function F(e){var t=e.match(/\d+/g),n=t[0].substring(0),a=t[1];return t[2]+"."+a+"."+n}var P,U=+new Date,H=[65.5538179,27.7496755],Q=function(e){Object(o.useEffect)((function(){D=!1}),[]);var t=new K.a.icon({iconUrl:B,iconSize:[35,58],iconAnchor:[17.5,40]});return K.a.Marker.prototype.options.icon=t,Object(s.jsxs)(R.a,{style:{width:"inherit",height:"inherit"},center:[65.5538179,27.7496755],zoom:5,scrollWheelZoom:!0,children:[Object(s.jsx)(L.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(s.jsx)(S.a,{children:function(t){return H=[t.getCenter().lat,t.getCenter().lng],D||(t.on("move",(function(n){!function(t){H=[t.lat,t.lng];var n=+new Date;if(n-U>10){U=n;var a={lat:t.lat,long:t.lng};e.passNewGraveCoordinates(a)}}(t.getCenter())})),D=!0),e.coordinatesToZoom&&e.coordinatesToZoom!==P&&e.coordinatesToZoom.lat&&(t.flyTo([e.coordinatesToZoom.lat,e.coordinatesToZoom.long],18),P=e.coordinatesToZoom),null}}),function(){if(e.addingNewGrave)return Object(s.jsx)(N.a,{position:H})}(),e.graves.map((function(e){var t;return Object(s.jsx)(N.a,{onClick:function(){return console.log("test")},position:[e.location.lat,e.location.long],children:Object(s.jsxs)(q.a,{children:[Object(s.jsxs)("h1",{style:{textAlign:"center"},children:[" ",e.name," "]}),Object(s.jsxs)("ul",{style:{listStyle:"none",padding:"3px",textAlign:"center"},children:[Object(s.jsxs)("li",{children:["Syntynyt: ",F(e.birthday)]}),Object(s.jsxs)("li",{children:["Kuollut: ",F(e.died)]}),Object(s.jsxs)("li",{children:["Hautausmaa: ",e.cemetery]}),Object(s.jsxs)("li",{children:["Kategoria: ",null!==(t=e.category)&&void 0!==t?t:"-"]})]})]})},e._id)}))]})},T=(n(76),function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn,a=Object(o.useState)(!1),r=Object(i.a)(a,2),c=r[0],u=r[1],d=Object(o.useState)(),j=Object(i.a)(d,2),h=j[0],g=j[1],b=Object(o.useState)([]),m=Object(i.a)(b,2),f=m[0],O=m[1],p=Object(o.useState)(!1),x=Object(i.a)(p,2),v=x[0],y=x[1],w=Object(o.useState)({lat:0,long:0}),k=Object(i.a)(w,2),I=k[0],N=k[1];function R(){A.loadGraves().then((function(e){O(e),u(!0)})).catch((function(e){console.log("Problem loading graves from database: ".concat(e))}))}return c||R(),Object(s.jsxs)("div",{id:"mainContainer",children:[Object(s.jsx)(l,{isLoggedIn:t,setIsLoggedIn:n}),Object(s.jsx)("div",{id:"mapContainer",children:Object(s.jsx)(Q,{graves:f,coordinatesToZoom:h,passNewGraveCoordinates:function(e){N(e)},addingNewGrave:v})}),Object(s.jsx)(C,{isLoggedIn:t,graves:f,handleSetCoordinatesForZoom:function(e){g(e)},newGraveCoordinates:I,addingNewGrave:function(e){y(e)},fetchGraves:R})]})}),J=function(){var e=Object(o.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(o.useEffect)((function(){A.checkLogin().then((function(e){console.log("APP",e,n),200===e.status?a(!0):a(!1)})).catch((function(e){return console.log(e)}))})),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(c.a,{children:Object(s.jsxs)(f.c,{children:[Object(s.jsx)(f.a,{path:"/about",children:Object(s.jsx)(x,{isLoggedIn:n,setIsLoggedIn:a})}),Object(s.jsx)(f.a,{path:n?"/":"/login",children:n?Object(s.jsx)(T,{isLoggedIn:n,setIsLoggedIn:a}):Object(s.jsx)(O,{isLoggedIn:n,setIsLoggedIn:a})}),Object(s.jsx)(f.a,{path:n?"/":"/register",children:n?Object(s.jsx)(T,{isLoggedIn:n,setIsLoggedIn:a}):Object(s.jsx)(p,{isLoggedIn:n})}),Object(s.jsx)(f.a,{path:"/",children:Object(s.jsx)(T,{isLoggedIn:n,setIsLoggedIn:a})})]})})})};r.a.render(Object(s.jsx)(J,{}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.4b03da4b.chunk.js.map